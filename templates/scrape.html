{% extends "base.html" %}

{% block content %}
<h2 class="text-center">Web Scraping</h2>
<p class="text-center">Utilize os links:
   <p class="text-center"> https://ofertas.mercadolivre.com.br/produtos-sustentaveis</p>
   <p class="text-center"> https://www.amazon.com/-/pt/b?node=21221608011</p>

</p>
<div class="form-group mt-4">
    <form method="POST" class="form-inline justify-content-center">
        <div class="form-group mr-3">
            <label for="platform" class="mr-2">Escolha a plataforma:</label>
            <select name="platform" id="platform" class="form-control" required>
                <option value="mercadolivre">Mercado Livre</option>
                <option value="amazon">Amazon</option>
            </select>
        </div>

        <div class="form-group mr-3">
            <label for="url" class="mr-2">URL:</label>
            <input type="text" name="url" id="url" class="form-control" required>
        </div>

        <button type="submit" class="btn btn-success">Iniciar Scraping</button>
    </form>
</div>

{% if success %}
    <div class="justify-content-center">
    <p class="success text-center mt-4">{{ success }}</p>
        {% if data_html %}
            <h3 class="text-center mt-5">Dados Raspados</h3>
            <div class="table-responsive mt-3 ">
                <div class="container justify-content-center">{{ data_html | safe }}</div>
            </div>
            <div class="text-center mt-4">
                <a href="{{ excel_link }}" download class="btn btn-success">Baixar Dados (Excel)</a>
                <a href="{{ csv_link }}" download class="btn btn-primary ml-2">Baixar Dados (CSV)</a>
            </div>
        {% endif %}
    </div>
    
{% endif %}

{% if error %}
    <p class="text-warning text-center mt-4">{{ error }}</p>
{% endif %}

{% endblock %}
